import desktopPhoto from './assets/resume_photo_desktop.png'
import squarePhoto from './assets/resume_photo_sqaure.png'
import widePhoto from './assets/resume_photo_wide.png'
import Heart from '../Decorations/Heart'
import Keynote from '../Decorations/Keynote'
import Tail from '../Decorations/Tail'
import Melody from '../Decorations/Melody'
import SoftwareApplist from '../SoftwareApplist'
import Divider from '../Divider'
import NameSection from '../NameSection'
import TitleBadge from '../TitleBadge'
import gsap from 'gsap'
import { DrawSVGPlugin } from 'gsap/DrawSVGPlugin'
import { lazy, Suspense, useEffect } from 'react'
import { useViewport } from '../../providers/ViewportProvider'

const Chalks = lazy(() => import('../Decorations/Chalks'))

interface ResumePhotoProps {
  greeting?: string
  firstName: string
  lastName: string
  className?: string
}

gsap.registerPlugin(DrawSVGPlugin)

function ResumePhoto({
  greeting = "hi, i'm",
  firstName,
  lastName,
  className = '',
}: ResumePhotoProps) {
  const fullName = `${firstName} ${lastName}`
  const { isDesktop } = useViewport()

  useEffect(() => {
    gsap.from('#svgMei', { duration: 2, drawSVG: 0 })
  }, [])

  return (
    <>
      <style>{`
        .resume-photo-bg {
          background-image: url('${widePhoto}');
          background-size: cover;
          background-position: center;
        }
        @media (max-width: 599px) {
          .resume-photo-bg {
            background-image: url('${squarePhoto}');
          }
        }
        @media (min-width: 840px) {
          .resume-photo-bg {
            background-image: url('${desktopPhoto}');
          }
        }
      `}</style>

      <div className="relative hidden w-full flex-row items-center justify-end gap-6 pt-18 pb-8 desktop:flex">
        <div className="shrink-0 grow basis-1/2 pl-7">
          <Divider color="brand-brown" variant="circles" />
        </div>

        <div className="grow-0">
          <SoftwareApplist />
        </div>
      </div>

      <div className="desktop:mr-auto desktop:aspect-square desktop:h-[65.34%] desktop:w-full desktop:grow-0 desktop:overflow-hidden desktop:rounded-[72px]">
        <div
          className={`resume-photo-bg relative z-10 h-[320px] w-full rounded-b-[30px] desktop:h-full ${className} `}
          role="img"
        >
          {isDesktop && (
            <div className="offset-0 absolute z-20 ml-18 flex h-[calc(100%-17.61%)] w-[152px] items-center justify-center">
              <Suspense fallback={null}>
                <Chalks className="flex" />
              </Suspense>
            </div>
          )}

          <Heart className="absolute top-[75%] left-side tablet:top-[50%] tablet:left-[50.9%] desktop:top-[40%] desktop:left-[45%]" />
          <Keynote className="absolute top-[50%] left-[47.8125%] tablet:top-[30%] tablet:left-[54.35%] desktop:top-[20px] desktop:left-[60%]" />
          <Tail className="absolute top-side left-[50.9%] tablet:top-[40px] tablet:left-[58.34%] desktop:top-[23%] desktop:left-[50%]" />
          <Melody className="absolute top-[10px] right-side tablet:top-[42px] tablet:right-[3%] tablet-lg:right-[12%] desktop:top-[20px] desktop:right-[7%]" />

          <div className="absolute inset-0 hidden desktop:pointer-events-none desktop:block">
            <svg
              className="absolute right-0 bottom-0 ml-auto h-full w-full max-w-[49.79%]"
              viewBox="-10 -160 500 1000"
              preserveAspectRatio="xMidYMid slice"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                id="svgMei"
                style={{
                  stroke: '#c9b08d',
                  strokeWidth: 4,
                  fill: 'none',
                  strokeLinecap: 'round',
                  strokeLinejoin: 'round',
                  vectorEffect: 'non-scaling-stroke',
                }}
                d="M2.76727 805.946C2.07732 801.975 0.25514 797.869 0.0693846 793.826C-0.487883 781.588 2.37806 768.378 6.27894 756.906C10.0029 745.966 20.5291 728.091 19.4588 717.43C18.3885 706.768 14.7353 704.463 17.3181 691.676C20.591 675.495 26.5086 660.925 28.3839 643.564C32.957 601.179 32.1609 556.651 36.4598 514.158C38.0874 498.111 49.2682 484.658 50.5154 469.999C52.2756 449.378 48.3217 428.478 47.7998 407.938C47.7113 404.544 49.1885 397.574 48.5605 395.485C47.2868 391.199 22.7316 384.904 20.6352 374.405C19.1403 366.931 28.0301 350.912 31.7717 343.87C40.8207 326.815 52.7621 311.525 62.1295 294.704C67.658 284.772 75.6897 262.567 81.917 255.471C86.4105 250.356 96.1406 246.61 101.474 242.099L126.357 228.736C128.71 219.533 130.32 210.096 133.778 201.209C142.978 177.58 152.38 168.531 155.662 140.724C159.298 109.892 159.112 98.393 173.769 70.1002C179.801 58.4662 192.433 33.154 201.216 25.1668C222.782 5.5726 251.123 -3.08091 279.756 0.980205C290.618 2.52001 291.113 6.46407 282.958 13.4607C293.289 10.8854 298.146 5.05933 308.858 10.9484C316.465 15.1356 336.199 44.0857 340.277 52.7302C351.555 76.6106 346.124 99.5726 353.253 123.183C361.037 148.981 378.755 165.487 385.044 193.375C390.811 218.93 382.868 240.28 384.602 264.881C385.92 283.466 394.155 300.26 396.702 318.225C398.852 333.416 393.518 334.73 379.772 335.55C371.272 336.054 361.082 335.811 352.784 334.604C346.663 353.514 340.011 371.082 337.013 390.983C333.377 415.115 335.093 435.583 334.218 459.211C334.173 460.301 334.881 462.561 333.342 462.345C325.823 427.785 328.265 382.851 341.736 349.921C352.439 323.763 360.94 331.579 384.133 329.21C387.857 328.832 390.749 328.463 391.952 324.573C394.73 315.559 385.407 294.479 382.895 284.619C374.208 250.608 384.947 222.271 376.19 189.791C371.236 171.403 364.195 162.921 356.155 147.216C350.555 136.267 352.608 131.413 349.688 121.409C348.565 117.573 345.911 115.07 345.027 111.765C340.48 94.8361 342.833 77.9253 335.518 59.3757C332.422 51.5236 314.536 22.3574 308.495 17.6119C305.602 15.3427 302.312 13.1546 298.508 13.5237C291.538 14.2171 263.321 29.1919 261.348 28.7237C259.562 28.3005 259.491 25.0317 260.782 23.7621C265.957 18.2602 274.758 14.019 279.827 8.96737C280.685 8.11192 281.507 7.80576 281.171 6.29298C263.949 4.74417 249.097 3.90673 232.848 10.6242C200.403 24.0322 191.442 44.5719 176.422 74.6296C162.438 102.607 164.419 115.493 160.863 145.154C158.041 168.666 149.629 177.409 140.182 196.967C132.027 213.842 130.382 231.14 121.35 247.961C116.07 257.785 108.109 266.529 105.552 277.758C103.42 287.149 103.093 293.66 114.106 295.578C119.652 296.541 124.075 290.868 126.675 286.663C129.01 282.881 133.681 270.022 135.768 268.023C137.104 266.745 139.245 267.447 139.661 267.042C139.873 266.835 139.775 264.485 140.589 263.053C141.925 260.721 147.896 255.39 150.222 252.157C155.751 244.449 172.999 209.961 178.669 207.359C183.304 205.234 184.507 208.169 183.048 212.266C181.376 211.258 180.138 211.393 179.147 213.23L154.777 255.003L179.094 248.267H193.68C188.355 238.911 180.138 229.916 181.42 218.245C181.977 216.643 185.41 216.994 187.506 214.554C190.54 211.033 194.785 196.225 196.934 196.153C198.013 196.117 197.887 195.878 197.701 196.967C196.613 203.145 195.918 212.266 191.893 217.219C186.206 224.225 182.305 220.992 187.665 231.464C192.707 241.316 201.862 250.059 206.833 260.532C212.839 273.174 215.856 288.833 221.809 301.953C224.71 308.355 229.009 313.776 231.698 320.233L233.529 319.656C240.659 309.976 246.638 299.072 254.643 290.076C265.408 277.983 280.87 271.58 291.812 259.541C298.261 252.436 302.232 242.252 307.522 234.193L303.294 219.488C304.435 219.74 305.169 220.974 305.788 221.892C309.707 227.691 324.567 267.033 325.868 274.318C328.99 291.814 316.553 286.24 304.621 286.969C290.211 287.843 275.881 290.274 261.481 290.544L235.59 327.364C232.777 330.021 231.3 329.886 229.177 326.851C225.701 321.89 219.447 310.111 216.793 304.384C208.832 287.221 205.887 267.951 195.838 251.851C186.533 254.94 176.688 255.714 167.382 258.848C158.112 261.972 150.293 268.123 140.651 269.419C133.248 281.494 126.879 307.761 107.923 298.252C97.0339 292.786 100.484 278.946 104.544 269.563C109.356 258.46 121.005 246.754 124.075 235.471C124.287 234.697 125.596 233.166 123.438 233.923C117.485 235.994 88.0646 255.201 84.5883 260.054C73.4872 296.938 37.7248 329.67 26.6236 364.779C23.4746 374.729 24.7926 374.837 33.1162 379.79C41.4399 384.742 50.2765 388.227 58.4763 392.657C67.3484 397.457 75.7251 403.409 84.9687 407.515C87.6577 386.48 91.7886 365.364 92.965 344.131C93.2658 338.674 91.762 321.466 93.9203 318.117C94.6191 317.027 95.026 316.361 96.4678 316.667C95.0614 320.89 97.1755 326.131 97.3878 330.561C98.7234 357.854 93.938 384.814 89.7629 411.603L92.9296 416.502H88.5069C86.2778 431.918 91.6293 446.803 93.6992 462.048C95.3002 473.817 96.5121 510.583 102.633 518.372C104.88 521.235 110.019 524.504 113.699 524.531C123.031 524.603 132.991 522.847 142.854 523.559C154.468 524.405 165.896 528.863 177.449 529.727C188.311 530.546 199.2 527.638 210 527.107C234.706 525.9 258.314 528.331 283.285 525.234C296.023 523.649 308.185 521.262 320.074 516.346C307.548 500.687 304.594 487.423 322.453 474.555C318.411 463.38 316.659 451.278 315.669 439.437C314.174 421.707 313.652 400.483 316.801 383.04C319.764 366.634 326.425 349.732 333.475 334.802L336.863 334.649C334.518 348.399 328.22 361.285 324.744 374.936C318.888 397.943 318.464 422.094 320.038 445.776C320.649 454.952 322.241 464.11 323.612 473.168C324.222 473.835 328.486 470.224 329.335 469.549C331.078 468.171 335.748 464.209 336.385 462.336C338.481 456.15 333.952 447.64 336.411 439.869C338.349 433.773 342.479 433.53 343.514 431.81C344.549 430.09 343.7 423.49 344.027 420.644C345.54 407.767 353.085 398.537 362.824 391.154C365.265 389.299 364.584 387.498 369.909 388.551C370.626 388.749 370.617 390.992 371.732 392.234C372.51 393.099 383.912 402.112 385.159 402.86C389.175 405.246 391.528 404.454 395.676 403.031C406.194 399.42 429.634 380.69 437.303 372.091C441.885 366.958 440.028 365.832 437.772 360.105C430.236 341.016 405.477 278.163 393.102 266.583C391.581 265.16 389.352 263.476 387.229 263.548C388.14 258.244 392.014 260.117 395.314 262.08C416.145 274.534 432.916 343.195 446.918 365.202C448.67 370.704 443.69 374.801 440.284 378.25C451.226 388.533 458.878 411.855 457.843 426.704C456.905 440.085 430.2 475.248 419.471 483.92C410.439 491.223 397.693 492.961 391.802 503.442C394.801 510.502 397.481 517.733 400.612 524.747C407.706 540.587 417.923 556.813 424.23 572.679C428.077 582.368 428.767 586.799 421.726 595.065C412.474 605.916 401.231 607.302 387.662 607.257C383.213 607.239 377.64 605.772 373.094 605.375C371.201 603.547 377.278 602.881 378.065 602.8C387.653 601.791 397.012 603.827 406.662 600.423C411.855 598.595 421.903 590.004 422.567 584.16C423.398 576.866 413.084 561.243 409.75 554.139C402.691 539.137 394.535 523.514 390.758 507.341C387.707 511.105 386.15 515.986 383.178 519.858C375.022 530.483 360.922 535.211 348.371 537.957C350.325 562.531 364.859 583.206 371.555 606.501C375.464 620.116 376.34 636.442 381.028 649.039C384.867 659.359 391.324 667.697 394.739 679.16C398.905 693.144 404.531 714.242 407.317 728.424C409.334 738.708 409.316 749.486 411.864 759.779C415.605 774.898 424.899 785.925 425.969 802.142L421.018 804.159C416.339 785.222 408.157 769.873 405.035 750.54C401.205 726.885 396.349 702.149 389.44 679.16C386.123 668.129 379.754 660.286 376.207 650.354C371.457 637.072 370.67 620.557 366.46 606.303C359.834 583.836 345.637 563.756 344.815 539.731C330.051 543.054 329.238 527.503 321.401 519.263C318.835 520.299 316.438 522.118 313.855 523.072C280.366 535.508 241.968 530.762 207.329 532.5C199.633 532.888 190.151 535.346 182.659 535.274C171.266 535.157 158.13 529.808 146.365 528.952C139.457 528.448 124.535 527.998 118.033 528.871C116.733 529.043 115.795 532.158 112.346 530.744C107.879 551.878 103.571 573.373 98.4846 594.444C94.5926 610.571 88.8872 625.222 86.7201 641.835C83.7391 664.68 79.5994 682.032 75.4774 704.157C74.0356 711.901 73.9383 720.086 72.1604 727.767C71.4881 730.676 69.4713 733.395 69.206 734.692C67.7907 741.535 73.9383 764.191 74.3275 773.169C74.7875 783.65 72.4523 796.86 67.2688 806H62.846C64.3055 798.436 68.1445 791.755 68.9229 783.848C70.1347 771.629 66.968 762.165 65.6058 750.558C64.5267 741.382 64.1463 732.062 62.6957 722.941C61.1123 712.945 56.5569 701.221 57.636 691.406C58.4675 683.851 63.3679 674.468 65.2343 666.76C68.2418 654.325 69.4359 640.674 72.1073 627.887C76.6627 606.105 82.085 583.179 87.3039 561.495C88.8784 554.967 98.5112 524.684 98.1927 521.343C98.0689 520.11 94.8137 514.554 94.0442 511.141C90.0725 493.564 90.1168 473.709 87.4719 455.762C85.3844 441.58 79.9002 428.469 83.633 413.764L51.798 396.71C51.6918 402.77 51.7803 409.919 52.2402 416.052C54.0536 440.148 59.9093 460.67 51.3645 484.442C43.4832 506.378 42.5013 506.918 40.7322 531.186C37.3798 577.056 37.4417 628.508 28.092 673.037C26.3406 681.357 21.3429 693.351 21.2721 701.248C21.2279 705.994 24.2176 711.802 24.7395 716.592C26.199 730.126 11.542 755.853 7.75614 771.08C4.89019 782.597 3.23608 794.33 6.27894 806H2.74073L2.76727 805.946ZM320.967 280.63C321.082 278.172 321.038 275.822 320.56 273.381C319.242 266.628 313.254 248.735 310.397 242.351C309.999 241.46 309.813 240.244 308.592 240.145C302.17 262.071 284.037 273.318 267.036 286.006C284.718 282.062 302.781 279.856 320.958 280.621L320.967 280.63ZM423.973 473.646C431.226 466.037 452.73 437.195 453.464 427.569C454.49 414.062 445.724 391.01 437.188 380.483L408.405 403.571C407.98 405.651 410.625 410.874 412.377 412.008C414.5 413.386 417.79 412.549 418.144 412.9C418.436 413.188 420.205 420.014 419.55 420.986C417.896 423.444 415.013 419.879 413.757 420.455C412.297 421.13 406.574 428.082 404.469 429.919C398.728 434.925 387.928 444.164 380.551 445.155C367.132 446.956 356.685 441.679 347.919 431.774C343.576 435.376 339.923 437.573 339.498 443.903C339.127 449.351 342.099 454.556 342.205 459.211C342.541 473.826 312.82 481.327 314.811 495.977C315.421 500.462 323.515 509.628 326.283 514.014C330.432 520.605 333.988 527.683 338.649 533.878C353.527 531.645 371.785 527.278 381.426 514.41C385.592 508.854 388.14 500.345 392.952 495.563C401.178 487.396 413.898 484.208 423.973 473.637V473.646ZM404.92 405.66C399.02 408.569 394.208 412.342 387.185 410.667C380.674 409.109 373.952 398.682 368.264 394.792C366.115 393.324 364.487 395.062 362.904 396.638C355.279 404.219 350.37 416.151 348.539 426.704C348.866 428.406 361.232 436.429 363.567 437.411C384.142 446.01 394.243 428.082 408.953 417.357L409.263 416.142C406.521 413.17 404.398 409.946 404.911 405.669L404.92 405.66ZM110.594 528.934L100.006 524.405C98.9711 537.489 94.4422 550.24 91.594 563.071C84.1107 596.74 78.9626 631.228 71.2846 664.743C68.5691 676.584 61.8465 687.831 63.1291 700.015C63.704 705.481 65.9066 712.558 67.7464 717.799C68.4452 696.953 76.7423 677.422 79.5641 656.972C80.882 647.418 80.7228 638.423 82.7661 628.743C85.2163 617.117 90.3556 605.519 93.5754 593.867C99.5195 572.319 103.005 550.014 110.612 528.943L110.594 528.934Z"
              />
            </svg>
          </div>

          {/* Content overlay */}
          <div className="absolute inset-0 px-6 pt-6 tablet:px-[72px]">
            {/* Name section */}
            <div className="desktop:hidden">
              <NameSection
                greeting={greeting}
                firstName={firstName}
                lastName={lastName}
                fullName={fullName}
              />
            </div>
            <TitleBadge className="desktop:hidden" />
          </div>

          <SoftwareApplist className="absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 tablet:bottom-[22px] tablet:left-[72px] tablet:translate-x-0 tablet:translate-y-0 tablet:justify-start desktop:hidden" />
        </div>
      </div>

      <div className="hidden w-full shrink grow-0 basis-[17.61%] desktop:flex">
        <div className="relative z-20 w-1/2 shrink-0 -translate-y-1/2 rounded-r-[45px] bg-brand-cream pt-8">
          <NameSection
            firstName={firstName}
            lastName={lastName}
            fullName={fullName}
          />
        </div>
        <div className="w-full">
          <TitleBadge className="mt-10 h-[70px] max-h-[unset] w-full max-w-full border-3" />
        </div>
      </div>
      <div className="absolute bottom-0 left-0 h-[178px] w-full translate-y-[28px] rounded-[30px] bg-brand-cream tablet:bg-brand-dark desktop:hidden" />
    </>
  )
}

export default ResumePhoto
